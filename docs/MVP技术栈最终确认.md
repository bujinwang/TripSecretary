# MVP 技术栈最终确认

> **决策日期**: 2025-01-XX  
> **版本**: V1.0 MVP  
> **状态**: ✅ 已确定，开始开发

---

## ✅ 核心决策汇总

### 1. APP名称
```
✅ 入境通 (ChuJinTong)
   - 英文名: GoAbroad
   - Slogan: "入境通，扫一扫！"
   - 域名: chujingtong.com
   - 吉祥物: 小飞机 ✈️
```

### 2. AI模型方案
```
✅ 仅使用云端AI (不使用本地AI)

主力:
- 阿里通义千问 Qwen-Max
- 价格: ¥0.04/1k tokens (input), ¥0.12/1k (output)
- 响应速度: 1-2秒
- 质量: 98分

备用:
- 百度文心一言 ERNIE 4.0
- 价格: ¥0.024/1k tokens

❌ 不使用:
- 本地AI模型 (Qwen2-0.5B/1.5B)
- V1.1阶段根据用户反馈再决定是否加入
```

### 3. 完整技术栈

#### 前端
```
React Native + Expo
├── 平台: iOS + Android
├── 语言: JavaScript/TypeScript
└── 离线存储: SQLite (证件、政策、历史)
```

#### 认证
```
微信登录 (主要)
├── SDK: react-native-wechat-lib
├── 成本: ¥300/年 (微信开放平台认证)

手机号+SMS (备用)
├── 服务商: 阿里云/百度云短信
└── 成本: ¥0.05/条
```

#### 后端
```
Cloudflare Workers + D1 + KV + R2
├── API: Cloudflare Workers (全球边缘节点)
├── 数据库: Cloudflare D1 (SQLite分布式)
├── 缓存: Cloudflare KV (翻译、政策库)
├── 文件: Cloudflare R2 (护照照片、PDF)
└── 成本: 免费 (在免费额度内)
```

#### AI服务
```
✅ 阿里通义千问 Qwen-Max (主力)
   - 生成入境表格
   - 验证证件信息
   - 生成海关问答
   - 智能分析签证

✅ 百度文心一言 ERNIE 4.0 (备用)
   - 主AI失败时降级

❌ 不使用本地AI (MVP阶段)
```

#### OCR服务
```
✅ PaddleOCR (本地，主力)
   - 完全离线
   - 免费
   - 准确率: 95%+

✅ 阿里云OCR (云端，备用)
   - PaddleOCR失败时使用
   - 准确率: 99%+
   - 成本: ¥0.15/次
```

#### 翻译服务
```
✅ 本地翻译缓存库 (主力)
   - 预置1000+常用短语
   - 响应: 0ms
   - 免费

✅ 百度翻译API (动态)
   - 缓存未命中时使用
   - 成本: ¥49/100万字符
```

---

## 💰 成本预算 (MVP)

### 开发期 (6-8周)
```
微信开放平台认证: ¥300
AI测试费用: ¥500
域名: ¥100
Apple Developer: $99/年 (¥720)
Google Play: $25 一次性 (¥180)

总计: ¥1,800
```

### 运营期 (1000用户/月)
```
阿里通义千问: ¥140
百度翻译: ¥12
阿里云OCR: ¥15 (备用)
百度云SMS: ¥60
Cloudflare: ¥0 (免费额度内)

总计: ¥227/月
单用户成本: ¥0.23
```

---

## 📅 开发计划

### Week 1-2: 基础设置
```
✅ 注册Cloudflare账号
✅ 创建D1数据库
✅ 申请微信开放平台
✅ 申请阿里通义千问API
✅ 申请百度翻译API
✅ 初始化React Native项目
```

### Week 3-4: 后端开发
```
✅ Cloudflare Workers API
✅ 微信登录Worker
✅ AI调用Worker (通义千问)
✅ D1数据库表设计
✅ R2文件上传
```

### Week 5-6: 前端开发
```
✅ 证件扫描 (PaddleOCR)
✅ 微信登录集成
✅ AI生成页面
✅ 本地SQLite
✅ 离线功能
```

### Week 7-8: 测试上线
```
✅ 真机测试 (华为/小米/OPPO)
✅ 性能测试
✅ 安全测试
✅ Bug修复
✅ 应用商店上架
```

---

## 🎯 MVP核心功能

### 必须有 (P0)
```
✅ 证件扫描 (PaddleOCR)
✅ AI生成入境表格 (通义千问)
✅ 海关问答双语卡
✅ 微信登录
✅ 云端备份 (D1)
✅ 支持5国 (HK/TW/TH/US/CA)
```

### 暂不做 (V1.1再考虑)
```
❌ 本地AI模型
❌ 证件遗失应急
❌ 签证指导
❌ 更多国家支持
❌ 多语言界面
```

---

## 💳 定价策略 (MVP)

### 免费版
```
功能:
- 云端AI生成: 3次/月
- 证件扫描: 无限次
- 海关问答: 无限次
- 云端备份: 5个证件

限制:
- 每月3次AI生成
- 超出需购买额度包或升级会员
```

### 基础会员 ¥49/年
```
功能:
- 云端AI生成: 30次/月
- 证件扫描: 无限次
- 海关问答: 无限次
- 云端备份: 20个证件
- 优先客服

增值:
- 比免费版多27次/月
- 平均 ¥1.8/次
```

### 高级会员 ¥99/年
```
功能:
- 云端AI生成: 无限次
- 证件扫描: 无限次
- 海关问答: 无限次
- 云端备份: 无限证件
- 优先客服
- 未来新功能优先体验

增值:
- 完全无限制使用
- 适合频繁出国用户
```

### 额度包 (按需购买)
```
10次额度包: ¥9.9
30次额度包: ¥24.9
100次额度包: ¥79

策略:
- 免费用户额度用完可购买
- 引导升级会员更划算
```

---

## 📊 成功指标

### 上线第一个月
```
目标:
- 下载量: 1,000+
- 日活跃: 100+
- 付费转化率: 5%+
- 免费用户月均使用: 2次
- 付费会员: 50+

关键指标:
- 如果80%免费用户月使用<3次 → 额度合理
- 如果50%用户抱怨额度不够 → 考虑V1.1加本地AI
```

### 第一季度 (3个月)
```
目标:
- 累计下载: 5,000+
- 月活跃: 1,000+
- 付费转化率: 8%+
- 月收入: ¥5,000+

决策点:
- 根据用户反馈决定是否开发V1.1本地AI功能
- 评估是否增加更多国家支持
```

---

## 🚫 MVP不做的功能 (重要)

### 明确不做列表
```
❌ 本地AI模型 (Qwen2-0.5B/1.5B)
   原因: 降低复杂度，先验证市场需求
   
❌ 证件遗失应急功能
   原因: MVP聚焦核心流程
   
❌ 签证办理指导
   原因: 范围过大，MVP聚焦通关
   
❌ 多语言界面 (仅中文)
   原因: 目标用户是中国人
   
❌ 社交分享功能
   原因: 涉及隐私，不鼓励分享证件信息
   
❌ Apple Sign In
   原因: 微信登录已够用
   
❌ 更多国家支持 (仅5国)
   原因: MVP聚焦高频目的地
```

---

## ✅ 与其他文档的对比

### 本文档 vs 最终技术栈确认.md
```
一致性: ✅ 100%一致
差异: 本文档明确MVP阶段不使用本地AI
用途: 本文档是MVP阶段的执行文档
```

### 本文档 vs 本地AI模型方案.md
```
关系: 本地AI模型方案.md是技术调研文档
决策: 采纳其建议 - MVP不做本地AI
状态: 本地AI方案保留，V1.1再决定是否实施
```

---

## 🔄 版本规划

### V1.0 (MVP) - 当前 ✅
```
时间: 6-8周开发
功能: 核心通关功能
AI: 仅云端 (通义千问)
国家: 5个 (HK/TW/TH/US/CA)
定价: 免费3次 + 会员
```

### V1.1 - 未来 (3-6个月后)
```
条件触发:
- 如果50%+用户抱怨免费额度不够
- 或者用户强烈要求离线功能

可能增加:
- 本地AI模型 (Qwen2-0.5B)
- 更多国家支持
- 签证指导基础功能

决策依据:
- V1.0用户数据和反馈
```

### V2.0 - 未来 (6-12个月后)
```
可能方向:
- 完善本地AI (Qwen2-1.5B)
- 证件遗失应急
- 签证办理完整流程
- 行程规划助手
```

---

## 📝 文档更新历史

```
2025-01-XX: 创建本文档
- ✅ 确认MVP不使用本地AI
- ✅ 确认完整技术栈
- ✅ 确认定价策略
- ✅ 确认开发计划

此文档为MVP阶段的最终执行标准
所有开发工作以此文档为准
```

---

## 🚀 准备开始

```
✅ 技术栈: 已确定
✅ 功能范围: 已明确
✅ 成本预算: 已计算
✅ 开发计划: 已制定
✅ 定价策略: 已确定

状态: ✅ 可以开始开发！

下一步:
1. 注册各项服务账号
2. 搭建开发环境
3. 初始化代码仓库
4. 开始Week 1开发工作
```

---

**文档版本**: v1.0  
**状态**: ✅ 最终确认  
**下次更新**: V1.0上线后根据数据决定V1.1规划

---

END OF DOCUMENT
